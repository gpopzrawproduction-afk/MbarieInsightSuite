<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewmodels="clr-namespace:MIC.Desktop.Avalonia.ViewModels"
        mc:Ignorable="d" 
        d:DesignWidth="600" 
        d:DesignHeight="500"
        Width="600" 
        Height="500"
        MinWidth="500"
        MinHeight="400"
        Title="Mbarie Intelligence Console - First Run Setup"
        x:Class="MIC.Desktop.Avalonia.Views.FirstRunSetupWindow"
        x:DataType="viewmodels:FirstRunSetupViewModel">
  
  <Grid RowDefinitions="Auto,*">
    <!-- Header -->
    <StackPanel Grid.Row="0" Margin="20,20,20,10">
      <TextBlock Text="Welcome to Mbarie Intelligence Console" 
                 FontSize="20" 
                 FontWeight="Bold" 
                 HorizontalAlignment="Center"/>
      <TextBlock Text="Please create your administrator account" 
                 FontSize="14" 
                 Foreground="Gray" 
                 HorizontalAlignment="Center" 
                 Margin="0,5,0,0"/>
    </StackPanel>

    <!-- Main Content -->
    <ScrollViewer Grid.Row="1" Margin="20,10,20,20">
      <StackPanel Spacing="15">
        
        <!-- Email Input -->
        <StackPanel Spacing="5">
          <TextBlock Text="Email Address" FontWeight="Medium"/>
          <TextBox Watermark="Enter your email address" 
                   Text="{Binding Email, Mode=TwoWay}"
                   IsEnabled="{Binding !IsBusy}"/>
        </StackPanel>

        <!-- Password Input -->
        <StackPanel Spacing="5">
          <TextBlock Text="Password" FontWeight="Medium"/>
          <TextBox Watermark="Enter a strong password (minimum 12 characters)" 
                   Text="{Binding Password, Mode=TwoWay}"
                   PasswordChar="*"
                   IsEnabled="{Binding !IsBusy}"/>
          <TextBlock Text="Password must contain at least 12 characters, with uppercase, lowercase, numbers, and special characters."
                     FontSize="11" 
                     Foreground="DarkGray" 
                     TextWrapping="Wrap"/>
        </StackPanel>

        <!-- Confirm Password Input -->
        <StackPanel Spacing="5">
          <TextBlock Text="Confirm Password" FontWeight="Medium"/>
          <TextBox Watermark="Confirm your password" 
                   Text="{Binding ConfirmPassword, Mode=TwoWay}"
                   PasswordChar="*"
                   IsEnabled="{Binding !IsBusy}"/>
        </StackPanel>

        <!-- Error Message -->
        <Border Background="#FFF8D7" 
                BorderBrush="#FFD1CB" 
                BorderThickness="1" 
                CornerRadius="4"
                Padding="10"
                IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <TextBlock Text="âš " FontSize="16"/>
            <TextBlock Text="{Binding ErrorMessage}" 
                       VerticalAlignment="Center" 
                       TextWrapping="Wrap"/>
          </StackPanel>
        </Border>

        <!-- Action Buttons -->
        <StackPanel Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Spacing="10" 
                    Margin="0,20,0,0">
          
          <Button Content="Finish Setup" 
                  Command="{Binding FinishSetupCommand}"
                  IsDefault="True">
          </Button>
        </StackPanel>

        <!-- Busy Indicator -->
        <ProgressBar IsVisible="{Binding IsBusy}" 
                     IsIndeterminate="True" 
                     Height="3" 
                     Margin="0,10,0,0"/>

      </StackPanel>
    </ScrollViewer>
  </Grid>
</Window>